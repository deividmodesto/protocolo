{% extends "base.html" %}
{% block title %}Gerenciar Modelos de Protocolo{% endblock %}
{% block content %}
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>Modelos de Protocolo</h1>
        <a href="{{ url_for('main.adicionar_modelo') }}" class="btn btn-primary">Criar Novo Modelo</a>
    </div>

     <table class="table table-hover">
        <thead>
            <tr>
                <th>Nome do Modelo</th>
                <th>Descrição</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for modelo in modelos %}
            <tr>
                <td>{{ modelo.nome }}</td>
                <td>{{ modelo.descricao }}</td>
    
    {# --- SUBSTITUA TODA A CÉLULA DE AÇÕES POR ISTO --- #}
    <td>
        <a href="{{ url_for('main.design_modelo', modelo_id=modelo.id) }}" class="btn btn-sm btn-info">Desenhar</a>
        <a href="{{ url_for('main.editar_modelo', modelo_id=modelo.id) }}" class="btn btn-sm btn-secondary">Editar</a>
        
        <form action="{{ url_for('main.excluir_modelo', modelo_id=modelo.id) }}" method="POST" class="d-inline" onsubmit="return confirm('Tem certeza que deseja excluir este modelo e todos os seus campos? Esta ação não pode ser desfeita.');">
    {{ form_excluir.hidden_tag() }}
    <button type="submit" class="btn btn-sm btn-danger">Excluir</button>
</form>
    </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="3" class="text-center">Nenhum modelo encontrado.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <a href="{{ url_for('main.admin_dashboard') }}" class="btn btn-outline-secondary mt-3">Voltar ao Painel</a>
{% endblock %}